<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selected Publications</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .publication {
            margin-bottom: 10px;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/bibtex-js@2.0.0"></script>
    <script>
        const bibtexContent = `
        @article{sample2020,
            author = {Doe, John and Smith, Jane},
            title = {An example article},
            journal = {Journal of Examples},
            year = {2020},
            volume = {10},
            number = {2},
            pages = {123-456},
            month = {Jan},
            note = {An important note},
            key = {sample2020}
        }
        @book{samplebook2021,
            author = {Doe, John},
            title = {An example book},
            publisher = {Example Publisher},
            year = {2021},
            address = {Example City},
            edition = {2nd},
            key = {samplebook2021}
        }
        `;

        function formatAPA(entry) {
            const { entryTags, entryType } = entry;
            const { author, title, journal, year, volume, number, pages, publisher, address, edition } = entryTags;
            let formattedEntry = '';

            switch (entryType.toLowerCase()) {
                case 'article':
                    formattedEntry = `${author}. (${year}). ${title}. <em>${journal}</em>, ${volume}(${number}), ${pages}.`;
                    break;
                case 'book':
                    formattedEntry = `${author}. (${year}). <em>${title}</em> (${edition} ed.). ${address}: ${publisher}.`;
                    break;
                default:
                    formattedEntry = `${author}. (${year}). ${title}.`;
            }
            return formattedEntry;
        }

        function displayPublications(entries) {
            const container = document.getElementById('publications');
            container.innerHTML = '';
            entries.forEach(entry => {
                const div = document.createElement('div');
                div.className = 'publication';
                div.innerHTML = formatAPA(entry);
                container.appendChild(div);
            });
        }

        const bibtexParser = new BibtexParser();
        bibtexParser.setInput(bibtexContent);
        bibtexParser.bibtex();
        const entries = bibtexParser.getEntries();
        displayPublications(entries);
    </script>
</head>
<body>
    <h1>Selected Publications</h1>
    <div id="publications"></div>
</body>
</html>
